# LINE 自動化模板截取指南

## 重要提醒
為避免數字變化導致模板匹配失敗，程式已改用直接偵測箭頭的方式，不再依賴包含數字的模板。

## 必要模板清單

### 1. 箭頭狀態模板（必需）
- **`hide.png`** - 收合箭頭 →
- **`show.png`** - 展開箭頭 ↓

這兩個模板用於箭頭校正功能，確保最終狀態為 3 個收合 + 1 個展開。

### 2. 好友定位模板（必需）
- **`friend.png`** - 好友標題

用於定位「好友」區塊的位置，以便找到第一個好友。

### 3. 其他功能模板（必需）
- **`friend-list.png`** - 好友列表按鈕
- **`greenchat.png`** - 綠色聊天框圖示（未讀訊息）
- **`message_cube.png`** - 訊息輸入框圖示

## ~~已移除的模板~~
以下模板已不再需要（程式改用直接偵測箭頭）：
- ~~`favorite.png`~~ - 收藏
- ~~`community.png`~~ - 社群
- ~~`group.png`~~ - 群組

## 詳細截取說明

### hide.png（收合箭頭）
1. 找到 LINE 左側列表中任何一個收合狀態的區塊（箭頭指向右 →）
2. 只截取箭頭圖標部分（約 20x20 到 30x30 像素）
3. **不要包含文字或數字**，只要箭頭本身
4. 儲存為 `hide.png`

### show.png（展開箭頭）
1. 找到 LINE 左側列表中任何一個展開狀態的區塊（箭頭指向下 ↓）
2. 只截取箭頭圖標部分（約 20x20 到 30x30 像素）
3. **不要包含文字或數字**，只要箭頭本身
4. 儲存為 `show.png`

### friend.png（好友標題）
1. 找到 LINE 左側列表中的「好友」區塊標題
2. 截取「[👤圖標] 好友」文字部分
3. **不要包含數字「(123)」**
4. **不要包含右側箭頭**
5. 大約 60x30 像素左右
6. 儲存為 `friend.png`

### friend-list.png（好友列表按鈕）
截取開啟好友列表的按鈕圖標

### greenchat.png（綠色聊天框）
截取表示有未讀訊息的綠色聊天框圖示（約 20x20 像素）

### message_cube.png（訊息輸入框）
截取訊息輸入框旁邊的圖示

## 建議規格
- **格式**：PNG（支援透明背景）
- **尺寸**：
  - 箭頭：20x20 到 30x30 像素
  - 文字標題：60x30 像素左右
- **背景**：透明或與 LINE 介面背景一致
- **解析度**：與你的螢幕實際顯示一致
- **重要**：在實際使用的電腦上截取模板

## 測試方法
截取模板後，可以使用「測試」頁面中的「箭頭校正」功能來驗證模板是否正確。

## 截取範例

假設 LINE 介面顯示：
```
[★圖標] 收藏 (5)    [→]  ← 收合狀態
[👤圖標] 好友 (123)  [↓]  ← 展開狀態
[👥圖標] 群組 (45)   [→]  ← 收合狀態
[🏢圖標] 社群 (12)   [→]  ← 收合狀態
```

應該截取：
- **`hide.png`** → 只截取任何一個 `[→]` 箭頭圖標
- **`show.png`** → 只截取 `[↓]` 箭頭圖標
- **`friend.png`** → 只截取 `[👤圖標] 好友` 部分（不含數字和箭頭）

## 疑難排解

### 問題：箭頭校正失敗
**可能原因**：
1. `hide.png` 或 `show.png` 模板不準確
2. 螢幕縮放比例不同
3. LINE 版本更新導致箭頭樣式改變

**解決方法**：
1. 重新截取箭頭模板，確保只包含箭頭本身
2. 確認螢幕縮放比例為 100%
3. 在實際使用的電腦上截取模板
4. 使用「測試」頁面的「箭頭校正」功能驗證

### 問題：找不到好友區塊
**可能原因**：
`friend.png` 模板包含了會變化的數字或箭頭

**解決方法**：
重新截取 `friend.png`，只包含固定的「[圖標] 好友」文字部分

## 運作原理

箭頭校正的新邏輯：
1. 掃描整個 LINE 介面，找出所有 `hide.png`（→）和 `show.png`（↓）
2. 檢查當前狀態：展開箭頭數量 vs 收合箭頭數量
3. 自動調整直到達到目標：**3 個收合 + 1 個展開**
4. 最多嘗試 10 次

這種方式不依賴文字或數字，只依賴固定不變的箭頭圖標，因此更穩定可靠。
